{% extends 'layout.html' %}
{% block content %}
<div class="container-fluid">


				<div class="row page-titles">
					<ol class="breadcrumb">
						<li class="breadcrumb-item active"><a href="javascript:void(0)">App</a></li>
						<li class="breadcrumb-item"><a href="javascript:void(0)">Profile</a></li>
					</ol>
                </div>
     <div class="row">
                    <div class="col-lg-12">
                        <div class="profile card card-body px-3 pt-3 pb-0">
                            <div class="profile-head">
                                <div class="photo-content">
                                    <div class="cover-photo rounded"></div>
                                </div>
                                <div class="profile-info">
									{% if current_user.avatar %}
										<img src="{{ url_for('static', filename='uploads/'+current_user.avatar)  }}" class="img-fluid rounded-circle" style="width:100px;height:100px" alt="">
                                        {% else%}
                                        <img src="{{ url_for('static', filename='uploads/default_avatar.png')  }}" class="img-fluid rounded-circle" style="width:100px;height:100px" alt="">
                                        {% endif %}
									<div class="profile-details">
										<div class="profile-name px-3 pt-2">
											<h4 class="text-primary mb-0">{{ current_user.username }}</h4>
											<p>Username</p>
										</div>
										<div class="profile-email px-2 pt-2">
											<h4 class="text-muted mb-0">{{ current_user.email }}</h4>
											<p>Email</p>
										</div>
                                        <div class="profile-email px-2 pt-2">



												</div>
										<div class="dropdown ms-auto">
											<a href="#" class="btn btn-primary light sharp" data-bs-toggle="dropdown" aria-expanded="true"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18px" height="18px" viewbox="0 0 24 24" version="1.1"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect x="0" y="0" width="24" height="24"></rect><circle fill="#000000" cx="5" cy="12" r="2"></circle><circle fill="#000000" cx="12" cy="12" r="2"></circle><circle fill="#000000" cx="19" cy="12" r="2"></circle></g></svg></a>
											<ul class="dropdown-menu dropdown-menu-end">
												<li class="dropdown-item"><i class="fa fa-user-circle text-primary me-2"></i> View profile</li>
												<li class="dropdown-item"><i class="fa fa-users text-primary me-2"></i> Add to btn-close friends</li>
												<li class="dropdown-item"><i class="fa fa-plus text-primary me-2"></i> Add to group</li>
												<li class="dropdown-item"><i class="fa fa-ban text-primary me-2"></i> Block</li>
											</ul>
										</div>
<div class="text-center">


</div>
									</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    <div class="row">
        <div class="col-xl-4">
						<div class="row">
							<div class="col-xl-12">
								<div class="card">
									<div class="card-body">
										<div class="profile-statistics">
											<div class="text-center">
												<div class="row">
													<div class="col">
														<h3 class="m-b-0">{{ current_user.followers.count() }}</h3><span>Follower</span>
													</div>
													<div class="col">
														<h3 class="m-b-0">{{ current_user.following.count() }}</h3><span>Following</span>
													</div>

												</div>
												<div class="mt-4">

												</div>
											</div>
											<!-- Modal -->

										</div>
									</div>
								</div>
							</div>

							<div class="col-xl-12">

							</div>

						</div>
            <div class="col-xl-8">

            </div>
                    </div>
        <div class="col-xl-8">
            <div class="card">
									<div class="card-body">
										<div class="profile-blog">
<div class="btn-group" role="group">
                                    <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">See follower</button>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" href="{{ url_for('follower', user_id=user.id) }}">Follow</a>
                                        <a class="dropdown-item" href="javascript:void()">Image Follow</a>
                                    </div>
                                </div>
                                            <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">See following</button>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" href="{{ url_for('following', user_id=user.id) }}">Following</a>
                                        <a class="dropdown-item" href="{{ url_for('following_images') }}">Image Following</a>
                                    </div>

                                </div>
                                             <a href="{{ url_for('upload_image') }}"><button class="btn btn-primary me-2" ><i class="fa fa-plus-circle" aria-hidden="true"></i></button></a>
                                             <a href="{{ url_for('create_album') }}"><button class="btn btn-primary me-2" ><i class="fa fa-list-alt" aria-hidden="true"></i> Album</button></a>
<a href="{{ url_for('update_avatar') }}"><button class="btn btn-primary me-2" >Avatar</button></a>
                                            <a href="{{ url_for('change_password') }}"><button class="btn btn-primary me-2" ><i class="fa-solid fa-key"></i></button></a>
                                            <a href="{{ url_for('add_pin_board') }}"><button class="btn btn-primary me-2" ><i class="fa-solid fa-clipboard"></i></button></a>
										</div>
									</div>
								</div>
        </div>
    </div>
    <div class="row">
        <div class="card">
                            <div class="card-body">
                                <div class="profile-tab">
                                    <div class="custom-tab-1">
                                        <ul class="nav nav-tabs">
                                            <li class="nav-item"><a href="#my-posts" data-bs-toggle="tab" class="nav-link active show">Image</a>
                                            </li>
                                            <li class="nav-item"><a href="#about-me" data-bs-toggle="tab" class="nav-link">Album</a>
                                            </li>
                                            <li class="nav-item"><a href="#saved" data-bs-toggle="tab" class="nav-link">Saved</a>
                                            </li>
                                            <li class="nav-item"><a href="#pin" data-bs-toggle="tab" class="nav-link">Pin</a>
                                            </li>
                                            <li class="nav-item"><a href="#profile-settings" data-bs-toggle="tab" class="nav-link">Setting</a>
                                            </li>
                                        </ul>
                                        <div class="tab-content">
                                            <div id="my-posts" class="tab-pane fade active show">
                                                <div class="my-post-content pt-3">
<div class="row">
           {% for image in current_user.images %}
            <div class="col-xl-3 col-lg-6 col-sm-6">
                        <div class="card" style="height:auto">
                            <div class="card-body">
                                <div class="new-arrival-product">
                                    <div class="new-arrivals-img-contnent">
                                        <img class="img-fluid" src="{{ url_for('static', filename='uploads/' + image.image_path) }}" alt="" style="width:500px;">

                                    </div>
                                     <div class="new-arrival-content text-center mt-3">
                                         <a href="{{ url_for('view_image', image_id=image.id) }}"><h4>{{ image.caption }}</h4></a>

            <a href="{{ url_for('update_caption', image_id=image.id) }}"><button class="btn btn-primary me-2" ><i class="fa fa-gavel" aria-hidden="true"></i></button></a>
              <form method="post" action="{{ url_for('delete_image', image_id=image.id) }}" style="display: inline;">
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this image?')" class="btn btn-primary me-2"><i class="fa fa-trash" aria-hidden="true"></i></button>
                </form>
                                     </div>

                                </div>
                            </div>
                        </div>
                    </div>
           {% endfor %}
       </div>



                                                </div>
                                            </div>

                                            <div id="about-me" class="tab-pane fade">
                                                <div class="row">
                                                    {% for album in albums %}
                                                    <div class="col-xl-3 col-lg-6 col-sm-6">
                                                    <div class="card" style="border:0.5 solid black">
                                                    <div class="pt-4 border-bottom-1 pb-3">
                                                        <center><h2 class="text-primary">{{ album.name }}</h2></center>
                                                    </div>
                                                        <div class="profile-skills mb-5">


                                                    <a href="{{ url_for('update_album', album_id=album.id) }}" class="btn btn-primary light btn-xs mb-1">Update</a>
                                                    <form method="post" action="{{ url_for('delete_album', album_id=album.id) }}" style="display: inline;">
                    <button class="btn btn-primary light btn-xs mb-1"type="submit" onclick="return confirm('Are you sure you want to delete this image?')">Delete </button>

                </form>

                                                            <a href="{{ url_for('view_album',album_id=album.id) }}" class="btn btn-primary light btn-xs mb-1">Detail </a>
                                                </div>









                                                    </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>

                                            </div>
                                            <div id="saved" class="tab-pane fade">
                                                <div class="row" >
                                                  {% for saved_image in saved_images  %}
       <div class="col-lg-12 col-xl-4">
            <div class="card" style="width:auto;height:auto">
    <div class="card-body">
        <div class="column" >
        <div class="gallery-item new-arrival-product">
            <div class="new-arrivals-img-contnent" >
          <img src="{{ url_for('static', filename='uploads/' + saved_image.image.image_path) }}" alt="Imagen 1" />
            </div>
          <div class="hover-elements">
            <a href="{{ url_for('view_image', image_id=saved_image.image.id) }}"><button class="btn-save btn btn-primary">Image</button></a>
            <div class="bottom-buttons">
              <a href="{{saved_image.image.link}}"><button class="btn-link"><i class="fa-solid fa-link"></i></button></a>

                <div class="dropdown ms-auto">
											<a href="#" class="btn btn-primary light sharp" data-bs-toggle="dropdown" aria-expanded="true"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18px" height="18px" viewbox="0 0 24 24" version="1.1"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect x="0" y="0" width="24" height="24"></rect><circle fill="#000000" cx="5" cy="12" r="2"></circle><circle fill="#000000" cx="12" cy="12" r="2"></circle><circle fill="#000000" cx="19" cy="12" r="2"></circle></g></svg></a>
											<ul class="dropdown-menu dropdown-menu-end">
												<a href="{{ url_for('view_profile', user_id=saved_image.image.user.id) }}"><li class="dropdown-item"><i class="fa fa-user-circle text-primary me-2"></i> View profile</li></a>
                                                <a href="{{ url_for('view_image', image_id=saved_image.image.id) }}"><li class="dropdown-item"><i class="fa-regular fa-image text-primary me-2"></i> View image</li></a>

											</ul>
										</div>
            </div>
            <div class="image-alt">{{saved_image.image.caption}}</div>
          </div>

        </div>

          </div>
    </div>

</div>
</div>
                                                   {% endfor %}
</div>
 </div>




                                            <div id="profile-settings" class="tab-pane fade">

                                            </div>
                                            <div id="pin" class="tab-pane fade">
<div class="row">
                                                    {% for album in pin_boards %}
                                                    <div class="col-xl-3 col-lg-6 col-sm-6">
                                                    <div class="card" style="border:0.5 solid black">
                                                    <div class="pt-4 border-bottom-1 pb-3">
                                                        <center><h2 class="text-primary">{{ album.name }}</h2></center>
                                                    </div>
                                                        <div class="profile-skills mb-5">



                                                    <form method="post" action="{{ url_for('delete_pin_board', pin_board_id=album.id) }}" style="display: inline;">
                    <button class="btn btn-primary light btn-xs mb-1"type="submit" onclick="return confirm('Are you sure you want to pin?')">Delete </button>

                </form>

                                                            <a href="{{ url_for('view_pin_board_user', pin_board_id=album.id) }}" class="btn btn-primary light btn-xs mb-1">Detail </a>
                                                </div>









                                                    </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
									<!-- Modal -->
									<div class="modal fade" id="replyModal">
										<div class="modal-dialog modal-dialog-centered" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<h5 class="modal-title">Post Reply</h5>
													<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
												</div>
												<div class="modal-body">
													<form>
														<textarea class="form-control" rows="4">Message</textarea>
													</form>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-danger light" data-bs-dismiss="modal">btn-close</button>
													<button type="button" class="btn btn-primary">Reply</button>
												</div>
											</div>
										</div>
									</div>
                                </div>
                            </div>
                        </div>
                    </div>
    </div>
</div>



<!--    &lt;!&ndash; Display your details as needed &ndash;&gt;-->
<!--    <p>Email: {{ current_user.email }}</p>-->
<!--    <p>Avatar: {{ current_user.avatar }}</p>-->

<!--    &lt;!&ndash; Display the number of followers and following &ndash;&gt;-->
<!--    <p>Followers: {{ current_user.followers.count() }}</p><a href="{{ url_for('follower', user_id=user.id) }}">Following</a>-->
<!--    <p>Following: {{ current_user.following.count() }}</p><a href="{{ url_for('following', user_id=user.id) }}">Following</a>-->
<!--    <a href="{{ url_for('following_images') }}">Following Images</a>-->

<!--    &lt;!&ndash; Display images uploaded by the current user &ndash;&gt;-->
<!--    <h2>Your Uploaded Images</h2>-->
<!--    <a href="{{ url_for('upload_image') }}"><button>Create Image</button></a>-->
<!--    {% for image in current_user.images %}-->
<!--        <div>-->
<!--            <img src="{{ url_for('static', filename='uploads/' + image.image_path) }}" alt="Image">-->
<!--            <p>{{ image.caption }}</p>-->
<!--            <a href="{{ url_for('update_caption', image_id=image.id) }}">Update</a>-->
<!--              <form method="post" action="{{ url_for('delete_image', image_id=image.id) }}" style="display: inline;">-->
<!--                    <button type="submit" onclick="return confirm('Are you sure you want to delete this image?')">Delete Image</button>-->
<!--                </form>-->
<!--            &lt;!&ndash; Add more details as needed &ndash;&gt;-->
<!--        </div>-->
<!--    {% endfor %}-->
<!-- <h3>Albums:</h3>-->
<!--    <a href="{{ url_for('create_album') }}"><button>Create Album</button></a>-->
<!--    <ul>-->
<!--        {% for album in albums %}-->
<!--            <li>-->
<!--                {{ album.name }}-->
<!--                <a href="{{ url_for('update_album', album_id=album.id) }}">Update</a>-->
<!--                <form method="post" action="{{ url_for('delete_album', album_id=album.id) }}" style="display: inline;">-->
<!--                    <button type="submit" onclick="return confirm('Are you sure you want to delete this image?')">Delete Image</button>-->
<!--                    <a href="{{ url_for('view_album',album_id=album.id) }}">Detail Album</a>-->
<!--                </form>-->


<!--            </li>-->

<!--        {% endfor %}-->
<!--    </ul>-->

<!--    &lt;!&ndash; Add more sections or details as needed &ndash;&gt;-->

<!--    &lt;!&ndash; Link to update avatar &ndash;&gt;-->
<!--    <a href="{{ url_for('update_avatar') }}">Update Avatar</a>-->

<!--    &lt;!&ndash; Logout button &ndash;&gt;-->
<!--    <a href="{{ url_for('logout') }}">Logout</a>-->

<!--</body>-->
<!--</html>-->
{% endblock %}